FROM python:3.12-slim

WORKDIR /app

# Install dependencies
RUN pip install --no-cache-dir sentence-transformers weaviate-client requests

# Copy application code
COPY etl_with_embeddings.py /app/

# Set environment variables
ENV PYTHONUNBUFFERED=1
ENV WEAVIATE_URL=http://weaviate:8080

# Run ETL script
CMD ["python", "etl_with_embeddings.py"]